# 系统功能测试验证清单

请按照以下步骤逐一验证系统的各个功能模块是否正常工作。

## 1. 环境准备

- [ ] 确认MySQL服务正常运行
- [ ] 确认后端API服务正常运行（端口4000）
- [ ] 确认前端可以访问后端API
- [ ] 确认数据库已正确初始化

## 2. 用户认证功能测试

### 2.1 用户注册
- [ ] 访问前端登录页面
- [ ] 点击"注册账号"按钮
- [ ] 填写手机号、密码、姓名、邮箱
- [ ] 点击注册按钮
- [ ] 验证注册成功提示
- [ ] 验证数据库中新增用户记录

### 2.2 用户登录
- [ ] 使用新注册账号登录
- [ ] 验证登录成功跳转到主界面
- [ ] 验证用户信息正确显示在右上角
- [ ] 验证"记住登录状态"功能
- [ ] 测试退出登录功能

### 2.3 管理员登录
- [ ] 使用默认管理员账号登录（13800138000 / admin123）
- [ ] 验证管理员权限标识正确显示
- [ ] 验证管理员功能可见（添加产品、Excel导入等）

## 3. 产品管理功能测试

### 3.1 添加产品（管理员权限）
- [ ] 使用管理员账号登录
- [ ] 切换到"手动输入"标签
- [ ] 填写产品名称（如：测试产品001）
- [ ] 配置开放日规则
- [ ] 点击"添加产品"按钮
- [ ] 验证产品添加成功
- [ ] 验证产品列表中显示新产品

### 3.2 查看产品列表
- [ ] 普通用户登录后查看产品列表
- [ ] 验证只能查看不能编辑
- [ ] 管理员登录后查看产品列表
- [ ] 验证可以进行编辑操作

### 3.3 Excel导入功能（管理员权限）
- [ ] 使用管理员账号登录
- [ ] 切换到"Excel导入"标签
- [ ] 准备测试Excel文件（参考模板格式）
- [ ] 选择Excel文件并导入
- [ ] 验证导入成功提示
- [ ] 验证导入的产品数据正确显示

## 4. 日历视图功能测试

### 4.1 日历显示
- [ ] 切换到"日历视图"标签
- [ ] 验证预约期日历正确显示
- [ ] 验证开放日日历正确显示
- [ ] 测试月份切换功能
- [ ] 测试年份切换功能

### 4.2 休市日显示
- [ ] 验证休市日正确标记（灰色背景）
- [ ] 验证非休市日正确显示产品信息
- [ ] 测试不同月份的休市日显示

### 4.3 产品标注
- [ ] 验证预约期产品正确标注（蓝色背景）
- [ ] 验证开放日产品正确标注（绿色/蓝色/橙色背景）
- [ ] 验证产品名称正确显示和截断

## 5. 导出功能测试

### 5.1 图片导出
- [ ] 点击"导出为图片"按钮
- [ ] 验证图片正确生成并下载
- [ ] 验证图片包含完整的日历信息

### 5.2 PDF导出
- [ ] 点击"导出PDF"按钮
- [ ] 验证PDF正确生成并下载
- [ ] 验证PDF格式和内容正确

### 5.3 Excel导出
- [ ] 点击"导出Excel"按钮
- [ ] 验证Excel文件正确生成并下载
- [ ] 验证Excel包含预约期和开放日数据

## 6. 休市日管理功能测试（管理员权限）

### 6.1 查看休市日
- [ ] 使用管理员账号登录
- [ ] 发送GET请求到 `/api/holidays?year=2025`
- [ ] 验证返回2025年休市日列表

### 6.2 添加休市日
- [ ] 发送POST请求到 `/api/holidays`
- [ ] 请求体：`{"holidayDate": "2025-12-25", "holidayName": "圣诞节", "holidayType": "national"}`
- [ ] 验证添加成功
- [ ] 验证数据库中新增记录

### 6.3 删除休市日
- [ ] 发送DELETE请求到 `/api/holidays/{id}`
- [ ] 验证删除成功
- [ ] 验证数据库中记录被软删除

## 7. API接口测试

### 7.1 认证相关接口
- [ ] `POST /api/auth/register` - 用户注册
- [ ] `POST /api/auth/login` - 用户登录
- [ ] `GET /api/auth/me` - 获取用户信息

### 7.2 产品管理接口
- [ ] `GET /api/products` - 获取产品列表
- [ ] `GET /api/products/{id}` - 获取产品详情
- [ ] `POST /api/products` - 创建/更新产品
- [ ] `DELETE /api/products/{id}` - 删除产品

### 7.3 日历数据接口
- [ ] `GET /api/calendar/{year}/{month}` - 获取日历数据

### 7.4 休市日管理接口
- [ ] `GET /api/holidays` - 获取休市日列表
- [ ] `POST /api/holidays` - 添加休市日
- [ ] `DELETE /api/holidays/{id}` - 删除休市日

## 8. 跨域和安全测试

### 8.1 CORS配置
- [ ] 验证前端可以正常访问后端API
- [ ] 验证预检请求（OPTIONS）正确处理
- [ ] 验证认证头正确传递

### 8.2 安全头
- [ ] 验证响应包含安全头
- [ ] 验证HTTPS强制跳转（生产环境）

### 8.3 认证安全
- [ ] 验证未认证用户无法访问受保护接口
- [ ] 验证无效token被正确拒绝
- [ ] 验证过期token被正确处理

## 9. 权限控制测试

### 9.1 普通用户权限
- [ ] 验证普通用户只能查看日历数据
- [ ] 验证普通用户无法添加/编辑产品
- [ ] 验证普通用户无法访问管理员功能

### 9.2 管理员权限
- [ ] 验证管理员可以执行所有操作
- [ ] 验证管理员可以管理用户
- [ ] 验证管理员可以管理休市日

## 10. 错误处理测试

### 10.1 网络错误
- [ ] 测试后端服务不可用时的错误处理
- [ ] 测试数据库连接失败时的错误处理
- [ ] 测试前端网络超时时用户提示

### 10.2 数据验证错误
- [ ] 测试无效数据格式的错误提示
- [ ] 测试必填字段为空的验证
- [ ] 测试数据格式不正确的验证

## 11. 性能测试

### 11.1 加载性能
- [ ] 测试页面加载时间
- [ ] 测试API响应时间
- [ ] 测试大量数据时的渲染性能

### 11.2 并发测试
- [ ] 测试多用户同时访问的稳定性
- [ ] 测试大量数据导入的处理能力

## 12. 兼容性测试

### 12.1 浏览器兼容性
- [ ] 测试Chrome浏览器
- [ ] 测试Firefox浏览器
- [ ] 测试Safari浏览器
- [ ] 测试Edge浏览器

### 12.2 移动端兼容性
- [ ] 测试手机浏览器访问
- [ ] 测试平板设备访问

## 13. 数据完整性测试

### 13.1 数据一致性
- [ ] 验证产品数据在前端和数据库中的一致性
- [ ] 验证休市日数据正确同步
- [ ] 验证用户权限正确应用

### 13.2 数据恢复
- [ ] 测试数据库备份和恢复功能
- [ ] 测试数据导入导出的一致性

## 测试结果记录

请在每个测试项后标记：
- ✅ 通过
- ❌ 失败
- ⚠️ 部分通过
- 🚫 不适用

## 测试完成标准

- 所有核心功能测试项必须通过（标记为✅）
- 没有严重的安全漏洞
- 用户界面正常，无明显错误
- API接口稳定可靠
- 系统性能满足基本要求

---

**注意事项**：
1. 测试前请确保所有服务正常运行
2. 测试时请使用测试数据，避免影响生产数据
3. 测试完成后请清理测试数据
4. 如发现问题，请记录详细错误信息和复现步骤
